<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Project Suraksha â€” Command Dashboard</title>
  <meta name="description" content="Real-time ambulance signal priority dashboard for Project Suraksha" />

  <!-- Leaflet Map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Socket.io -->
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&family=JetBrains+Mono:wght@400;600&display=swap"
    rel="stylesheet" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <header class="header">
    <div class="header-left">
      <div class="logo">
        <span class="logo-icon">ðŸš‘</span>
        <div>
          <span class="logo-title">PROJECT SURAKSHA</span>
          <span class="logo-sub">Emergency Signal Priority System</span>
        </div>
      </div>
    </div>
    <div class="header-center">
      <div class="system-status" id="systemStatus">
        <span class="status-dot" id="statusDot"></span>
        <span id="statusText">Connectingâ€¦</span>
      </div>
    </div>
    <div class="header-right">
      <div class="header-stat">
        <span class="stat-label">SIGNALS CLEARED</span>
        <span class="stat-value" id="hdrCleared">0</span>
      </div>
      <div class="header-stat">
        <span class="stat-label">TIME SAVED</span>
        <span class="stat-value highlight" id="hdrTimeSaved">0s</span>
      </div>
      <span class="live-clock" id="liveClock">00:00:00</span>
    </div>
  </header>

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ MISSION BANNER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="mission-banner">
    <div class="mission-banner-track">
      <span class="mission-banner-text">â–Œ MISSION CONTROL ACTIVE â–Œ PROJECT SURAKSHA â–Œ GREEN CORRIDOR SYSTEM â–Œ EMERGENCY
        PRIORITY MODE â–Œ JAIPUR ROAD NETWORK â–Œ SIGNAL OVERRIDE READY â–Œ</span>
      <span class="mission-banner-text">â–Œ MISSION CONTROL ACTIVE â–Œ PROJECT SURAKSHA â–Œ GREEN CORRIDOR SYSTEM â–Œ EMERGENCY
        PRIORITY MODE â–Œ JAIPUR ROAD NETWORK â–Œ SIGNAL OVERRIDE READY â–Œ</span>
    </div>
  </div>

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ MAIN GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <main class="main-grid">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LEFT PANEL â€” DRIVER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <aside class="driver-panel">

      <!-- Fleet Status -->
      <div class="card">
        <div class="card-label">ACTIVE FLEET</div>
        <div class="fleet-list custom-scroll" id="fleetList">

          <div class="fleet-item" id="fleet-AMB-001">
            <div class="fleet-icon amb"><i class="fa-solid fa-truck-medical"></i></div>
            <div class="fleet-info">
              <span class="fleet-id">AMB-001</span>
              <span class="fleet-name">City Hospital 1</span>
            </div>
            <span class="fleet-badge standby" id="fbadge-AMB-001">STANDBY</span>
          </div>

          <div class="fleet-item" id="fleet-AMB-002">
            <div class="fleet-icon amb"><i class="fa-solid fa-truck-medical"></i></div>
            <div class="fleet-info">
              <span class="fleet-id">AMB-002</span>
              <span class="fleet-name">City Hospital 2</span>
            </div>
            <span class="fleet-badge standby" id="fbadge-AMB-002">STANDBY</span>
          </div>

          <div class="fleet-item" id="fleet-AMB-003">
            <div class="fleet-icon amb"><i class="fa-solid fa-truck-medical"></i></div>
            <div class="fleet-info">
              <span class="fleet-id">AMB-003</span>
              <span class="fleet-name">Regional Trauma</span>
            </div>
            <span class="fleet-badge standby" id="fbadge-AMB-003">STANDBY</span>
          </div>

          <div class="fleet-item" id="fleet-FIRE-001">
            <div class="fleet-icon fire"><i class="fa-solid fa-fire-flame-curved"></i></div>
            <div class="fleet-info">
              <span class="fleet-id">FIRE-001</span>
              <span class="fleet-name">Central Fire Stn</span>
            </div>
            <span class="fleet-badge standby" id="fbadge-FIRE-001">STANDBY</span>
          </div>

          <div class="fleet-item" id="fleet-POLICE-001">
            <div class="fleet-icon police"><i class="fa-solid fa-shield-halved"></i></div>
            <div class="fleet-info">
              <span class="fleet-id">POLICE-001</span>
              <span class="fleet-name">Traffic Response</span>
            </div>
            <span class="fleet-badge standby" id="fbadge-POLICE-001">STANDBY</span>
          </div>

        </div>
      </div>

      <!-- Consolidated Route Planner -->
      <div class="card">
        <div class="card-label">ROUTE PLANNER</div>
        <div class="route-content custom-scroll">

          <!-- Triage Level -->
          <div class="route-field">
            <label class="route-label">TRIAGE SEVERITY</label>
            <div class="triage-grid">
              <button class="triage-btn triage-red active" id="triageRed" onclick="setTriage('RED')">
                <span class="triage-icon"><i class="fa-solid fa-heart-pulse"></i></span>
                <span class="triage-name">CRITICAL</span>
              </button>
              <button class="triage-btn triage-yellow" id="triageYellow" onclick="setTriage('YELLOW')">
                <span class="triage-icon"><i class="fa-solid fa-triangle-exclamation"></i></span>
                <span class="triage-name">URGENT</span>
              </button>
              <button class="triage-btn triage-green" id="triageGreen" onclick="setTriage('GREEN')">
                <span class="triage-icon"><i class="fa-solid fa-circle-check"></i></span>
                <span class="triage-name">STABLE</span>
              </button>
            </div>
          </div>

          <!-- Vehicle Selection -->
          <div class="route-field" style="margin-top:8px">
            <label class="route-label">DISPATCH VEHICLE</label>
            <select class="select-input" id="vehicleSelect">
              <option value="AMB-001">AMB-001 â€” City Hospital Ambulance 1</option>
              <option value="AMB-002">AMB-002 â€” City Hospital Ambulance 2</option>
              <option value="AMB-003">AMB-003 â€” Regional Trauma Unit</option>
              <option value="FIRE-001">FIRE-001 â€” Central Fire Station Truck 1</option>
              <option value="POLICE-001">POLICE-001 â€” Traffic Response Unit</option>
            </select>
          </div>

          <!-- Source -->
          <div class="route-field" style="margin-top:8px">
            <label class="route-label">FROM</label>
            <select class="select-input" id="srcPreset" onchange="applyPreset('src')">
              <option value="">â€” Pick a location â€”</option>
              <option value="26.8950,75.7870">Bani Park (south)</option>
              <option value="26.8860,75.7880">C-Scheme Area</option>
              <option value="26.9000,75.7900">Statue Circle</option>
              <option value="26.9050,75.7875">Ajmer Road Cross</option>
              <option value="custom">Custom coordinatesâ€¦</option>
            </select>
            <div class="coord-inputs hidden" id="srcManual">
              <input class="coord-input" id="srcLat" type="number" step="0.0001" placeholder="Latitude" />
              <input class="coord-input" id="srcLon" type="number" step="0.0001" placeholder="Longitude" />
            </div>
          </div>

          <!-- Destination -->
          <div class="route-field" style="margin-top:8px">
            <label class="route-label">TO</label>
            <select class="select-input" id="dstPreset" onchange="applyPreset('dst')">
              <option value="">â€” Pick a location â€”</option>
              <option value="26.9350,75.7860">Sindhi Camp Bus Stand</option>
              <option value="26.9280,75.7868">Nehru Bazaar Gate</option>
              <option value="26.9200,75.7875">Civil Lines Overpass</option>
              <option value="26.9124,75.8050">Jaipur Junction Stn</option>
              <option value="custom">Custom coordinatesâ€¦</option>
            </select>
            <div class="coord-inputs hidden" id="dstManual">
              <input class="coord-input" id="dstLat" type="number" step="0.0001" placeholder="Latitude" />
              <input class="coord-input" id="dstLon" type="number" step="0.0001" placeholder="Longitude" />
            </div>
          </div>

          <div class="route-preview" id="routePreview">Select source &amp; destination above</div>
        </div>

        <button class="sim-btn" id="simBtn" onclick="toggleSimulation()">
          <i class="fa-solid fa-play" id="simBtnIcon"></i>
          <span id="simBtnText">START SIMULATION</span>
        </button>
        <div class="sim-sub" id="simSub"></div>
      </div>


    </aside>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RIGHT PANEL â€” DASHBOARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="dashboard-panel">

      <!-- Map -->
      <div class="map-container">
        <div id="map"></div>
        <div class="map-legend">
          <div class="legend-item"><span class="legend-dot green"></span>GREEN</div>
          <div class="legend-item"><span class="legend-dot red"></span>RED</div>
          <div class="legend-item"><span class="legend-dot hard-red"></span>HARD_RED</div>
          <div class="legend-item"><span class="legend-dot amb"></span>Ambulance</div>
        </div>
      </div>

      <!-- Bottom row: metrics + event log -->
      <div class="bottom-row">

        <!-- Performance metrics -->
        <div class="card metrics-card">
          <div class="card-title-row">
            <div class="card-label">PERFORMANCE METRICS & WAVE STATUS</div>
            <div class="wave-badge inactive" id="waveBadge">STANDBY</div>
          </div>
          <div class="metrics-grid">
            <div class="metric">
              <div class="metric-icon-wrap"><i class="fa-solid fa-stopwatch"></i></div>
              <div class="metric-body">
                <div class="metric-value green-text" id="mTimeSaved">+0 s</div>
                <div class="metric-label">TIME SAVED</div>
              </div>
            </div>
            <div class="metric">
              <div class="metric-icon-wrap"><i class="fa-solid fa-route"></i></div>
              <div class="metric-body">
                <div class="metric-value" id="mDistCovered">0.0 km</div>
                <div class="metric-label">DISTANCE</div>
              </div>
            </div>

            <div class="metric">
              <div class="metric-icon-wrap"><i class="fa-solid fa-siren-on"></i></div>
              <div class="metric-body">
                <div class="metric-value" id="mTriage">CRITICAL</div>
                <div class="metric-label">TRIAGE LEVEL</div>
              </div>
            </div>
            <div class="metric">
              <div class="metric-icon-wrap"><i class="fa-solid fa-hospital"></i></div>
              <div class="metric-body">
                <div class="metric-value" id="mETA">â€”</div>
                <div class="metric-label">ETA TO DEST.</div>
              </div>
            </div>

            <!-- Green Wave Stats -->
            <div class="metric">
              <div class="metric-icon-wrap"><i class="fa-solid fa-location-dot"></i></div>
              <div class="metric-body">
                <div class="metric-value" id="wsDistance">â€”</div>
                <div class="metric-label">NEXT SIGNAL</div>
              </div>
            </div>
            <div class="metric">
              <div class="metric-icon-wrap"><i class="fa-solid fa-stopwatch-20"></i></div>
              <div class="metric-body">
                <div class="metric-value" id="wsTTI">â€”</div>
                <div class="metric-label">TIME TO INT.</div>
              </div>
            </div>
            <div class="metric">
              <div class="metric-icon-wrap"><i class="fa-solid fa-wind"></i></div>
              <div class="metric-body">
                <div class="metric-value" id="wsSpeed">â€”</div>
                <div class="metric-label">WAVE SPEED</div>
              </div>
            </div>
            <div class="metric">
              <div class="metric-icon-wrap"><i class="fa-solid fa-arrow-down-9-1"></i></div>
              <div class="metric-body">
                <div class="metric-value" id="wsRemaining">â€”</div>
                <div class="metric-label">REMAINING</div>
              </div>
            </div>
          </div>


        </div>

        <!-- Event log -->
        <div class="card log-card">
          <div class="card-label">LIVE EVENT LOG</div>
          <div class="event-log" id="eventLog">
            <div class="log-entry log-info">
              <span class="log-time">â€”</span>
              <span class="log-tag">INFO</span>
              <span class="log-msg">System initializingâ€¦</span>
            </div>
          </div>
        </div>

      </div>
    </section>

  </main>

  <!-- Intersection state overlay (slides up when signal flips) -->
  <div class="signal-toast" id="signalToast"></div>

  <script src="app.js"></script>
</body>

</html>